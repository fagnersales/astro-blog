---
import { Image } from "@astrojs/image/components";
import type { CollectionEntry } from "astro:content";
import Tags from "./Tags.astro";

type Props = {
  hideAuthor?: boolean;
  minifyTitle?: boolean;
} & CollectionEntry<"blog">;

const { data, slug, hideAuthor, minifyTitle } = Astro.props as Props;

const minifiedTitle =
  data.title.length > 30 ? `${data.title.slice(0, 30)}...` : data.title;
---

<div
  data-title={data.title}
  class="p-4 border-solid border-2 border-sky-500 grid hover:bg-sky-50"
>
  <div class="grid gap-2">
    <h1 class="font-extrabold text-xl text-center md:text-left">
      {minifyTitle ? minifiedTitle : data.title}{" "}
    </h1>
    <Tags tags={data.tags} />
    <Image {...data.image} format="webp" fit={"contain"} class="h-48 w-96" />
    <p>{data.description}</p>
  </div>
  <div>
    <a
      href={`/${data.author.toLowerCase().replace(" ", "")}/${slug}`}
      class="text-sky-500 font-extrabold">Read more</a
    >
    {
      !hideAuthor && (
        <span class="font-bold text-lg text-sky-700 cursor-pointer">
          {"- "}
          <a href={`/${data.author.toLowerCase().replace(" ", "")}/`}>
            {data.author}
          </a>
        </span>
      )
    }
  </div>
</div>
